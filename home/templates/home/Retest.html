<!DOCTYPE html>
<html>
  <head>
  <link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block head %}
    <title>Base</title>
    {% endblock %}
  </head>
  <body>
    <br>
    <div class="container" >

      <!-- Static navbar -->
      <nav class="navbar navbar-default">
        <div class="container-fluid" style="background-color:#FFFFF10" >
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{% url 'home:retest_list' %}"><strong>SRMID</strong></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            {% if user.is_authenticated %}
                <ul class="nav navbar-nav">
                  {% if user.user_type == 1 %}
                    <li><a href="{% url 'home:home' %}">Home</a></li>
                  {% endif %}

                    <li> <a href="{% url 'home:retest_list' %}"><strong>Requests</strong></a> </li>
                    <!--<li> <a href="{% url 'home:onlyforhod' %}">Final Request</a> </li>-->
                    <!--<li><a href="{% url 'accounts:view_profile' %}">Profile</a></li>-->
                    <li><a href="{% url 'accounts:edit_profile' %}">Edit Profile</a></li>
                    <li><a href="{% url 'accounts:change_passwords' %}">Change Password</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="{% url 'accounts:logout' %}">Log out</a></li>
                </ul>
                {% else %}
                <ul class="nav navbar-nav">
                    <li><a href="/account/reset-password">Reset Password</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                  <li><a href="{% url 'accounts:login' %}">Login</a></li>
                  <li><a href="{% url 'accounts:register' %}">Register</a></li>
                  <!--<li><a href="{% url 'accounts:student_register' %}">Student Register</a></li>
                  <li><a href="{% url 'accounts:teacher_register' %}">Teacher Register</a></li>-->
                </ul>
                {% endif %}
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>

    </div> <!-- /container -->
    {% block body %}
    {% if user.user_type != 1 %}
      <div class="container">
        <div class="col-md-3"  style="background-color:#2C5F2CAA; border-radius: 15px;">
            <h1>Profile</h1>
            {% if user.userprofile.image %}
            <img src="{{ user.userprofile.image.url }}" width="140">
            {% endif %}

            {% if user.image %}
            <img src="{{ user.image.url }}" width="140">
            {% endif %}
            <br>
            <br>
            <p>Register Number: {{user}}</p>
            <p>Name: {{user.first_name}}</p>
            <p>Department: CSE</p>
            <p>Email: {{user.email}}</p>
        </div>
        <br>
        <div class="col-md-9"  style="padding-left:50px">
          <table class='table'>
              <thead>
                <tr>
                  <th>Type of Request: </th>
                  <th> </th>
                  <th> </th>
                  <th>proof: </th>
                  <th> </th>
                </tr>
              </thead>
              <tbody>
                {% for retest in retests %}
                 <!--{% if user.first_name == retest.Fa_name %}-->
                  <tr>
                    <td><h4>Restest</h4></td>
                    <td>
                      {% for e in users_all %}
                      {% if e.first_name == retest.name %}
                        <img src="{{ e.image.url }}" width="140">
                      {% endif %}
                      {% endfor %}
                    </td>
                    <td></td>
                    <td>
                      <a href="{{ retest.proof.url }}" class="btn btn-success btn-lg" target='_blank'>Medical Proof for Retest</a>
                    </td>
                    <td>
                      <form method='post' id='form_retest'>
                          {% csrf_token %}



                                                <input id="id_proof" maxlength="100" value ="{{ retest.proof.url }}" name="proof" type="hidden" required />
                          <tr><th><label for="id_name">Name:</label></th><td><input id="id_name" maxlength="100" style=" border-radius: 4px; border-style:initial" name="name" value="{{ retest.name }}" type="text" required /></td></tr>
                          <tr><th><label for="id_register_number">Register number:</label></th><td><input id="id_register_number" style=" border-radius: 4px; border-style:initial"  maxlength="100" value="{{ retest.register_number }}" name="register_number" type="text" required /></td></tr>

                          <tr><th><label for="id_subject">Subject:</label></th><td><input id="id_subject" maxlength="100" value="{{ retest.subject }}" style=" border-radius: 4px; border-style:initial"  name="subject" type="text" required /></td></tr>
                          <tr><th><label for="id_test">Test:</label></th><td><input id="id_test" maxlength="100" name="test"  style=" border-radius: 4px; border-style:initial"  value="{{ retest.test }}" type="text" required /></td></tr>


                          <tr>
                            <th><button id="mylink" class="btn btn-primary btn-lg" onclick="readValue()">Accept & Forward</button></th>
                          </tr>
                          <tr>
                            <th> <p id="demo">{{ forloop.counter }}</p></th>
                          </tr>


                          <script>

                                function readValue() {
                                  localStorage.setItem("color", "btn btn-danger");
                                  var x = localStorage.getItem("color");
                                  document.getElementById("demo").innerHTML = x;
                                  
                                        documnet.getElemetByID("form_retest").submit();
                          }



                          </script>





                      </form>

                    </td>
                  </tr>

                 <!--{% endif %}-->
                {% endfor %}





                {% for internship in internships %}
                  <!--{% if user.first_name == internship.Fa_name %}-->
                  <tr>
                    <td><h4>Internship NOC</h4></td>
                    <td>{% for e in users_all %}
                    {% if e.first_name == internship.name %}
                      <img src="{{ e.image.url }}" width="140">
                    {% endif %}
                    {% endfor %}</td>
                    <td></td>
                    <td>
                      <a href="{{ internship.proof.url }}" class="btn btn-success btn-lg" target='_blank'>Proof for Internship NOC</a>
                    </td>
                    <td>
                      <form method='post' id='myform1'>
                          {% csrf_token %}



                                                <label for="id_proof"></label></th><td><input id="id_proof" maxlength="100" value ="{{ internship.proof.url }}" name="proof" type="hidden" required />
                          <tr><th><label for="id_name">Name:</label></th><td><input id="id_name" maxlength="100" name="name" style=" border-radius: 4px; border-style:initial"  value="{{ internship.name }}" type="text" required /></td></tr>
                          <tr><th><label for="id_register_number">Register number:</label></th><td><input id="id_register_number" maxlength="100"  style=" border-radius: 4px; border-style:initial"  value="{{ internship.register_number }}" name="register_number" type="text" required /></td></tr>
                          <tr><th><label for="id_type">Type:</label></th><td><input id="id_type" maxlength="100" value="{{ internship.type }}" name="type" style=" border-radius: 4px; border-style:initial"  type="text" /></td></tr>



                          <tr>
                            <th><button id="retestbutton" class="btn btn-primary btn-lg" style="background-color:#2C5F2CAA; border-color:#2C5F2CAA;" onclick="myFunction()">Accept & Forward</button></th>
                          </tr>

                        <script>
                          function myFunction() {
                            document.getElementById("myform1").submit();
                          }
                        </script>


                      </form>

                    </td>
                  </tr>
                  <!--{% endif %}-->
                {% endfor %}
                {% for bonafied in bonafieds %}
                  <!--{% if user.first_name == bonafied.Fa_name %}-->
                  <tr>
                    <td><h4>Bonafied</h4></td>
                    <td>{% for e in users_all %}
                    {% if e.first_name == bonafied.name %}
                      <img src="{{ e.image.url }}" width="140">
                    {% endif %}
                    {% endfor %}</td>
                    <td></td>
                    <td>
                      <a href="{{ bonafied.proof.url }}" class="btn btn-success btn-lg" target='_blank'>&nbspProof for Bonafied Ctf.&nbsp</a>
                    </td>
                    <td>
                      <form method='post'>
                          {% csrf_token %}



                                              <label for="id_proof"></label></th><td><input id="id_proof" maxlength="100" name="proof" value="{{ bonafied.proof}}" type="hidden" required />
                        <tr><th><label for="id_name">Name:</label></th><td><input id="id_name" maxlength="100" name="name" style=" border-radius: 4px; border-style:initial"  value="{{ bonafied.name}}" type="text" required /></td></tr>
                        <tr><th><label for="id_register_number">Register number:</label></th><td><input id="id_register_number" maxlength="100" style=" border-radius: 4px; border-style:initial"  value="{{ bonafied.register_number}}" name="register_number" type="text" required /></td></tr>


                        <tr><th><label for="id_purpose">Purpose:</label></th><td><input id="id_purpose" maxlength="200" style=" border-radius: 4px; border-style:initial"  value="{{ bonafied.purpose}}" name="purpose" type="text" /></td></tr>
                          <tr>
                            <th><button type="submit" id="bonafiedbutton" class="btn btn-primary btn-lg" style="background-color:#2C5F2CAA; border-color:#2C5F2CAA;">Accept & Forward</button></th>
                          </tr>




                      </form>

                    </td>
                  </tr>
                  <!--{% endif %}-->
                {% endfor %}
              </tbody>
          </table>
        </div>
      </div>

{% endif %}






      {% if user.user_type == 1 %}
      <style>
        .dropbtn {
          background-color: #3498DB;
          color: white;
          padding: 16px;
          font-size: 16px;
          border: none;
          cursor: pointer;
        }

        .dropbtn:hover, .dropbtn:focus {
          background-color: #2980B9;
        }

        .dropdown {
          position: relative;
          display: inline-block;
        }

        .dropdown-content {
          display: none;
          position: absolute;
          background-color: #f1f1f1;
          min-width: 160px;
          overflow: auto;
          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
          z-index: 1;
        }

        .dropdown-content a {
          color: black;
          padding: 12px 16px;
          text-decoration: none;
          display: block;
        }

        .dropdown a:hover {background-color: #ddd;}

        .show {display: block;}
      </style>
  <div class="container">
    <div class="col-md-3" style="background-color:#2C5F2CAA; border-radius: 15px;" >
        <h1>Profile</h1>
        {% if user.userprofile.image %}
        <img src="{{ user.userprofile.image.url }}" width="140">
        {% endif %}
        {% if user.image %}
        <img src="{{ user.image.url }}" width="140">
        {% endif %}
        <br>
        <br>
        <p>Register Number: {{user}}</p>
        <p>Name: {{user.first_name}}</p>
        <p>Department: {{user.department}}</p>
        <p>Email: {{user.email}}</p>
    </div>
    <div class="col-md-5" style="padding-left:50px">
      <br>
                  <h1>Welcome</h1>
      <p>Choose the service from the dropdown menu below.</p>
      <div class="dropdown" >
        <button onclick="myFunction()" class="dropbtn" style="border-radius: 5px; background-color:#2C5F2CA4;">Dropdown</button>
        <div id="myDropdown" class="dropdown-content" >
          <a href="{% url 'home:upload_retest_form' %}">Re-Test</a>
          <a href="{% url 'home:upload_internship_form' %}">Internship NOC</a>
          <a href="{% url 'home:upload_bonafied_form' %}">Bonafied Certificate</a>
        </div>
     </div>
   </div>
  </div>



          <script>
          /* When the user clicks on the button,
          toggle between hiding and showing the dropdown content */
          function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
          }

          // Close the dropdown if the user clicks outside of it
          window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
              var dropdowns = document.getElementsByClassName("dropdown-content");
              var i;
              for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                  openDropdown.classList.remove('show');
                }
              }
            }
          }
          </script>
      {% endif %}

    {% endblock %}

  </body>
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</html>
